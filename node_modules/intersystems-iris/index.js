"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.IRIS = void 0;
const platform = process.platform.startsWith('win') ? 'windows' : process.platform;
const arch = process.arch;
const { irisConnect, irisClose, irisSQL } = require(`./lib/${platform}-${arch}/intersystems-iris.node`);
class IRIS {
    constructor(host, port, namespace, username, password) {
        this.db = irisConnect(host, port, namespace, username, password);
    }
    async sql(query) {
        return new Promise((done, reject) => {
            irisSQL(this.db, query, (err, data) => {
                err ? reject(err) : done(data);
            });
        });
    }
    async close() {
        return irisClose(this.db);
    }
}
exports.IRIS = IRIS;
//# sourceMappingURL=index.js.map